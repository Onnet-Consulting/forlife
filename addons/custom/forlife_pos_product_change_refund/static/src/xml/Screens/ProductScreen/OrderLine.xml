<?xml version="1.0" encoding="utf-8" ?>
<templates id="template" xml:space="preserve">
    <t t-name="forlife_pos_product_change_refund.Orderline" t-inherit="point_of_sale.Orderline" t-inherit-mode="extension" owl="1">
        <xpath expr="//ul[hasclass('info-list')]" position="inside">
            <t t-if="props.line.employee_id">
                <li class="info orderline-note">
                    <i class="fa fa-male" role="img" aria-label="Employee" title="Employee"/>
                    <t t-esc="env.pos.assignable_employee_by_id[props.line.employee_id]"/>
                </li>
            </t>
        </xpath>
        <xpath expr="//span[hasclass('price')]" position="after">
            <t t-if="props.line.order.is_refund_product or props.line.order.is_change_product">
                <table class="tbl_change_refund_product">
                    <tr class="title-change-refund">
                        <td class="set-width">SL đổi/trả</td>
                        <td class="set-width">SL mua mới</td>
                        <td class="set-width">%GG</td>
                        <td class="set-width-gg">Giảm giá</td>
                        <td>SL được đổi/trả</td>
                        <td>Hạn đổi/trả</td>
                    </tr>
                    <t t-if="!props.line.is_new_line">
                        <tr class="row-input-change-refund">
                            <td><input type="number" class="input-change-refund change" t-att-value="Math.abs(props.line.quantity)"
                                       t-on-change="onchangeValue"/></td>
                            <td></td>
                            <td></td>
                            <td><t t-esc="env.pos.format_currency(props.line.money_is_reduced)"/></td>
                            <td><t t-esc="props.line.quantity_canbe_refund"/></td>
                            <td><t t-esc="props.line.expire_change_refund_date"/></td>
                        </tr>
                        <tr class="row-input-change-refund">
                            <td>Lý do đổi/trả: </td>
                            <td colspan="3"><PosReasonRefund order_line="props.line"/></td>
                            <td></td>
                            <t t-if="props.line.check_button">
                                <t t-if="!props.line.approvalStatus">
                                    <div class="control-button" t-on-click="sendApprove"
                                         style="background: #007bff; color: #fff; font-weight: 400; border-radius: 10px; border: none;">
                                        Send Approve
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="control-button" t-on-click="actUpdate"
                                         style="background: #007bff; color: #fff; font-weight: 400; border-radius: 10px; border: none;">
                                        Update
                                    </div>
                                </t>
                            </t>
                        </tr>
                    </t>
                    <t t-if="props.line.is_new_line">
                        <tr class="row-input-change-refund">
                            <td></td>
                            <td><input type="number" class="input-change-refund new" t-on-change="onchangeValueNew"/></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </t>
                </table>
            </t>
        </xpath>
    </t>
</templates>
