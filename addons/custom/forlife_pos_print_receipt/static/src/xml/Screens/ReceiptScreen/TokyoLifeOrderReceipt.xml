<?xml version="1.0" encoding="UTF-8" ?>
<templates id="template" xml:spce="preserve">

    <t t-name="OrderReceipt_TokyoLife" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('pos-receipt')]" position="after">
            <t t-if="env.pos.pos_brand_info.code == 'TKL'">
                <div class="pos-receipt">
                    <t t-call="TokyoLifeOrderReceipt"/>
                </div>
            </t>
        </xpath>
    </t>

    <t t-name="TokyoLifeOrderReceipt" owl="1">
        <img class="pos-receipt-logo tokyolife"
             src="/forlife_pos_print_receipt/static/src/img/logo-tokyolife.png" height="25"/>
        <div>
            <div class="order-header">
                <strong>
                    <t t-esc="receipt.name"/>
                </strong>
                <span></span>
                <t t-esc="receipt.date.localestring1"/>
            </div>
        </div>
        <div class="customer-cashier-detail">
            <div>
                <span>Ngày giờ:</span>
                <t t-esc="receipt.date.localestring1"/>
            </div>
            <div>
                <span>Số hóa đơn:</span>
                <t t-esc="receipt.name"/>
            </div>
            <t t-if="receipt.partner">
                <div>
                    <span>Khách hàng: </span>
                    <t t-esc="receipt.partner.name"/> - <t t-esc="receipt.partner.phone || ''"/>
                </div>
            </t>
            <t t-if="receipt.cashier">
                <div>
                    <span>Nhân viên: </span>
                    <t t-esc="receipt.cashier"/>
                </div>
            </t>
            <div>
                <span>Ghi chú:</span>
            </div>
        </div>
        <t t-call="TokyoLifeOrderLinesReceipt"/>
        <t t-call="TokyoLifeOrderPaymentLinesReceipt"/>
        <t t-call="TokyoLifeOrderFooterReceipt"/>
    </t>

    <t t-name="TokyoLifeOrderLinesReceipt" owl="1">
        <div class="orderlines">
            <t t-call="SeparateLine"/>
            <table class="lines-detail">
                <tbody>
                    <tr>
                        <th class="num_1 text">Tên hàng</th>
                        <th class="num_2 number">SL</th>
                        <th class="num_3 number">ĐG</th>
                        <th class="num_4 number">GG</th>
                        <th class="num_5 number">Tổng tiền</th>
                    </tr>
                </tbody>
            </table>
            <t t-call="SeparateLine"/>
            <table class="lines-detail">
                <tbody>
                    <t t-foreach='receipt.orderlines' t-as='line' t-key="line.id">
                        <tr>
                            <td colspan="5">
                                <t t-esc="line.product_name_wrapped[0]"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="num_1 text">
                                <t t-esc="line.product_default_code || ''"/>
                            </td>
                            <td class="num_2 number">
                                <t t-esc="line.quantity"/>
                            </td>
                            <td class="num_3 number">
                                <t t-esc="env.pos.format_currency_no_symbol(line.price)"/>
                            </td>
                            <td class="num_4 number">
                                0
                            </td>
                            <td class="num_5 number">
                                <t t-esc="env.pos.format_currency_no_symbol(line.price_with_tax)"/>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </t>

    <t t-name="TokyoLifeOrderPaymentLinesReceipt" owl="1">
        <t t-call="SeparateLine"/>

        <div class="payment_lines">
            <table class="payment-detail">
                <tbody>
                    <tr>
                        <td class="col1"/>
                        <td class="col2"/>
                        <td class="col3"/>
                        <td class="col4"/>
                        <td class="col5"/>
                    </tr>
                    <tr>
                        <td class="col1 text">Tổng cộng:</td>
                        <td class="col2 number">
                            <t t-esc="receipt.total_line_qty"/>
                        </td>
                        <td class="number" colspan="3">
                            <t t-esc="env.pos.format_currency_no_symbol(receipt.total_rounded)"/>
                        </td>
                    </tr>
                </tbody>
            </table>

            <table class="payment-detail">
                <tbody>
                    <tr>
                        <td colspan="3" class="text-left">Chiết khấu:</td>
                        <td colspan="2" class="text-right">
                            <t t-esc="env.pos.format_currency_no_symbol(receipt.total_discount)"/>
                        </td>
                    </tr>
                </tbody>
            </table>

            <t t-call="SeparateLine"/>

            <table class="payment-detail">
                <tbody>
                    <tr>
                        <td colspan="3" class="text-left">Tổng tiền thanh toán:</td>
                        <td colspan="2" class="text-right">
                            <t t-esc="env.pos.format_currency_no_symbol(receipt.total_paid || 0)"/>
                        </td>
                    </tr>
                    <t t-foreach='receipt.paymentlines' t-as='line' t-key="line_index">
                        <tr>
                            <td colspan="3" class="text-left">
                                <t t-esc="line.name"/>:
                            </td>
                            <td colspan="2" class="text-right">
                                <t t-esc="env.pos.format_currency_no_symbol(line.amount)"/>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>

            <t t-call="SeparateLine"/>
        </div>
    </t>

    <t t-name="TokyoLifeOrderFooterReceipt" owl="1">
        <div class="receipt-footer">
            <div t-out="receipt.footer"/>
        </div>
    </t>

</templates>