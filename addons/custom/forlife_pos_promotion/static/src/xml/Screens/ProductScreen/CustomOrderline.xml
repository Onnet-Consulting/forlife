<?xml version="1.0" encoding="utf-8" ?>
<templates id="template" xml:space="preserve">
    <t t-name="forlife_pos_promotion.CustomOrderline" t-inherit="forlife_pos_layout.CustomOrderline" t-inherit-mode="extension" owl="1">
        <xpath expr="//ul[hasclass('custom-info-list')]//li[hasclass('line-unit-price')]" position="replace">
                <li class="line-unit-price">
                    <t t-if="props.line.is_applied_promotion()">
                        <t t-esc="env.pos.format_currency(props.line.original_price)"/>
                    </t>
                    <t t-else="">
                        <t t-if="props.line.display_discount_policy() == 'without_discount' and
                            env.pos.round_decimals_currency(props.line.get_unit_display_price()) &lt; env.pos.round_decimals_currency(props.line.get_taxed_lst_unit_price())">
                            <s>
                                <t t-esc="env.pos.format_currency(props.line.get_taxed_lst_unit_price())" />
                            </s>
                            <t t-esc="env.pos.format_currency(props.line.get_unit_display_price())" />
                        </t>
                        <t t-else="">
                            <t t-esc="env.pos.format_currency(props.line.get_unit_display_price())" />
                        </t>
                    </t>
                </li>
        </xpath>

        <xpath expr="//ul[hasclass('custom-info-list')]" position="inside">
            <t t-if="props.line.get_applied_promotion_str() or []">
                <t t-foreach="props.line.get_applied_promotion_str()" t-as="promotion" t-key="promotion.id">
                    <li style="width: 65%;">
                        <em>Giảm giá theo CT <t t-esc="promotion.str"/></em>
                    </li>
                    <li style="width: 35%;">
                        <t t-esc="env.pos.format_currency(promotion.discount_amount)"/>
                    </li>
                </t>
            </t>
        </xpath>
    </t>
</templates>
