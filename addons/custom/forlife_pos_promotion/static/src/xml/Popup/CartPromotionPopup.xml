<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="CartPromotionPopup" owl="1">
        <div class="popup popup-text popup-med-custom product-configurator-popup">
            <header class="title">
                <t t-esc="'Chọn chương trình đơn hàng'" />
            </header>
            <hr/>
            <main class="body product_configurator_attributes col-lg-4 col-md-6 col-sm-12">
                <ul>
                    <t t-foreach="props.programs" t-as="program" t-key="program.id">
                        <li class="program-item" style="margin: 0 0 20px 0;">
                            <input
                                    type="checkbox" name="programs"
                                    t-att-id="program.id"
                                    t-att-value="program.id"
                                    disabled="selectable"
                                    t-att-checked="'checked' ? program.isSelected : ''"
                            />
                            <i t-att-class="program.fixed ? 'fa fa-caret-up' : 'fa fa-caret-down'"
                               aria-hidden="true" t-on-click="()=>this.fixProgram(program)"/>
                            <label t-att-for="program.program.id" style="font-weight: bold;">
                                [<t t-esc="program.program.id"/>]&nbsp;&nbsp;<t t-esc="program.program.display_name"/>
                            </label>
                            <div style="margin: 0 0 0 15px">
                                <div t-if="program.selectedQty > 0">
                                    <strong t-esc="program.selectedQty"/> sản phẩm đã áp dụng khuyến mãi
                                </div>
                                <RewardSelectionCartPromotionPopup program="program" programOptions="props.programs"/>
<!--                                <div t-if="program.to_discount_lines.length > 0"  style="display: inline-block;" class="btn-primary">-->
<!--                                    <i title="Chọn SP giảm giá" t-on-click="() => this.select_reward(program)">Chọn SP giảm giá</i>-->
<!--                                </div>-->
<!--                                <div t-if="program.program.reward_type == 'cart_get_x_free' and program.to_reward_lines.length"  style="display: inline-block;" class="btn-primary">-->
<!--                                    <i title="Chọn SP tặng" t-on-click="() => this.select_reward(program)">Chọn SP tặng</i>-->
<!--                                </div>-->
                                <div t-if="program.program.reward_type == 'cart_get_x_free' and program.to_reward_lines.length == 0"
                                     style="display: inline-block;">
                                    <span style="font-style: italic; color: brown">Thêm SP tặng vào đơn hàng để nhận ưu đãi</span>
                                </div>
                                <div t-if="!(program.program.reward_type == 'cart_get_x_free' or program.program.reward_type == 'cart_get_voucher' or program.to_discount_lines.length > 0)"
                                    style="display: inline-block;">
                                    <span style="font-style: italic; color: brown">Thêm SP khuyến mãi vào đơn hàng để nhận ưu đãi</span>
                                </div>
                                <div t-if="program.program.reward_type == 'cart_get_voucher' and program.isSelected"
                                    style="display: inline-block;">
                                    <span style="font-style: italic; color: blue">Tặng Voucher: <t t-esc="program.program.voucher_product_variant_id[1]"/> trị giá <strong t-esc="this.env.pos.format_currency(program.program.voucher_price)"/></span>
                                </div>
                            </div>
                        </li>
                    </t>
                </ul>
            </main>
            <footer class="footer">
                <div class="button highlight confirm" t-on-click="confirm">
                    Apply
                </div>
                    <div class="button cancel" t-on-click="cancel">
                        Cancel
                    </div>
            </footer>
        </div>
    </t>

</templates>
