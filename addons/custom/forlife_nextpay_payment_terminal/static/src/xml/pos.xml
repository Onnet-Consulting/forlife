<?xml version="1.0" encoding="utf-8" ?>
<templates id="template" xml:space="preserve">
    <t t-name="PaymentScreenElectronicPayment">
        <tr class="send_request paymentline electronic_payment"/>
        <tr class="paymentline electronic_payment">
            <t t-if="line.payment_status == 'pending'">
                <t t-if="line.amount > 0">
                    <td colspan="3">
                        Payment request pending
                    </td>
                    <td colspan="2" class='button send_payment_request highlight' title="Send Payment Request" t-att-data-cid='line.cid'>
                        Send
                    </td>
                </t>
                <t t-else="">
                    <td colspan="3">
                        Waiting for process payment on merchant web/app
                    </td>
                    <td colspan="2" class='button force_return_payment_done_manually' title="Done" t-att-data-cid='line.cid'>
                        Done
                    </td>
                </t>
            </t>
            <t t-elif="line.payment_status == 'retry'">
                <td colspan="3">
                    Transaction cancelled
                </td>
                <td colspan="2" class='button send_payment_request highlight' title="Send Payment Request" t-att-data-cid='line.cid'>
                    Retry
                </td>
            </t>
            <t t-elif="line.payment_status == 'force_done'">
                <td colspan="3">
                    Connection error
                </td>
                <td colspan="2" class='button send_force_done' title="Force Done" t-att-data-cid='line.cid'>
                    Force done
                </td>
            </t>
            <t t-elif="line.payment_status == 'waitingCard'">
                <td colspan="3">
                    Waiting for payment
                </td>
                <t t-if="line.show_button_done_manually">
                    <td colspan="1" class='button force_payment_done_manually' title="Done Manually" t-att-data-cid='line.cid'>
                        Done Manually
                    </td>
                    <td colspan="1" class='button send_payment_cancel' title="Cancel Payment Request" t-att-data-cid='line.cid'>
                        Cancel
                    </td>
                </t>
                <t t-else="">
                    <td colspan="2" class='button send_payment_cancel' title="Cancel Payment Request" t-att-data-cid='line.cid'>
                        Cancel
                    </td>
                </t>
            </t>
            <t t-elif="['waiting', 'waitingCancel'].includes(line.payment_status)">
                <td colspan="3">
                    Request sent
                </td>
                <td colspan="2">
                    <i class='fa fa-spinner fa-spin' role='img'/>
                </td>
            </t>
            <t t-elif="line.payment_status == 'reversing'">
                <td colspan="3">
                    Reversal request sent to terminal
                </td>
                <td colspan="2">
                    <i class='fa fa-spinner fa-spin' role='img'/>
                </td>
            </t>
            <t t-elif="line.payment_status == 'done'">
                <t t-if="line.amount > 0">
                    <t t-if="line.can_be_reversed">
                        <td colspan="3">
                            Sent to <t t-esc="line.payment_method.name"/>
                            successful:
                            <t t-esc="line.unique_id"/>
                        </td>
                        <td colspan="2" class='button send_payment_reversal' title="Reverse Payment" t-att-data-cid='line.cid'>
                            Reverse
                        </td>
                    </t>
                    <t t-else="">
                        <td colspan="5">
                            Payment on <t t-esc="line.payment_method.name"/>
                            successful:
                            <t t-esc="line.unique_id"/>
                        </td>
                    </t>
                </t>
            </t>
            <t t-elif="line.payment_status == 'reversed'">
                <tr class="paymentline electronic_payment">
                    <td colspan="5">
                        Payment reversed
                    </td>
                 </tr>
             </t>
        </tr>
    </t>

    <t t-name="VNPayQrCodePopupWidget">
		<div class="modal-dialog">
            <div class="popup popup-confirm" style="height: 425px; width: 400px;">
				<p class="title" style="background-color: rgb(110,200,155); color: #fff;">VNPay QR Code</p>
                <div class='div-container'>
                    <img class="border border-dark rounded" t-att-src="widget.options.qr_uri"/>
                </div>
                <div class="footer" style="background-color: rgb(110,200,155); color: #fff;">
                    <div class="button confirm" style="background-color: #0075AC; color: #fff;">
                        Ok
                    </div>
                </div>
			</div>
		</div>
    </t>
</templates>